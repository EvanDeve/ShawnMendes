<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Panel de Administración - Shawn Mendes Fan Club CR</title>
    <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
    <style>
        /* Variables de color en tonos café y beige */
        :root {
            --color-beige-light: #f5f0e8;
            --color-beige: #f0d3bc;
            --color-beige-dark: #d8c2ad;
            --color-brown-light: #c2a792;
            --color-brown: #8c6d5d;
            --color-brown-dark: #5d483e;
            --color-text: #3d3228;
            --color-text-light: #745e4d;
            --shadow: 0 2px 8px rgba(93, 72, 62, 0.15);
        }
        
        /* Estilos generales */
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            padding: 0;
            margin: 0;
            overflow-x: hidden;
            -webkit-overflow-scrolling: touch;
            background-color: var(--color-beige-light);
            color: var(--color-text);
        }
        
        /* Estilos adicionales para móviles */
        input, textarea, select, button {
            font-size: 16px !important; /* Evita zoom automático en iOS */
            max-width: 100%;
            border-radius: 4px;
            border: 1px solid var(--color-beige-dark);
            padding: 8px 12px;
            background-color: white;
            color: var(--color-text);
        }
        
        input:focus, textarea:focus, select:focus {
            outline: none;
            border-color: var(--color-brown-light);
            box-shadow: 0 0 0 2px rgba(194, 167, 146, 0.3);
        }
        
        /* Evitar desbordamiento de contenedores en móvil */
        div {
            max-width: 100%;
            box-sizing: border-box;
        }
        
        .back-to-site {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 9999;
            background-color: var(--color-beige);
            color: var(--color-brown-dark);
            border: none;
            padding: 10px 15px;
            border-radius: 30px;
            font-size: 14px;
            font-weight: 600;
            text-decoration: none;
            cursor: pointer;
            box-shadow: var(--shadow);
            display: flex;
            align-items: center;
            gap: 5px;
            transition: all 0.3s ease;
        }
        
        .back-to-site:hover {
            background-color: var(--color-brown);
            color: var(--color-beige-light);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(93, 72, 62, 0.2);
        }
        
        /* Indicador de carga */
        .loading {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(245, 240, 232, 0.9);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9998;
        }
        
        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 5px solid rgba(194, 167, 146, 0.3);
            border-radius: 50%;
            border-top-color: var(--color-brown-light);
            animation: spin 1s ease-in-out infinite;
            margin-bottom: 20px;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* Estilos responsivos */
        @media (max-width: 576px) {
            .back-to-site {
                bottom: 15px;
                right: 15px;
                padding: 8px 12px;
                font-size: 12px;
            }
            
            .back-to-site svg {
                width: 14px;
                height: 14px;
            }
        }
        
        /* Estilos adicionales para el CMS */
        
        /* NOTA: Estos selectores se aplican después de que Netlify CMS carga */
        
        /* Cabecera del CMS */
        header[class*="AppHeader"] {
            background-color: var(--color-brown-dark) !important;
        }
        
        /* Barra lateral */
        div[class*="SidebarContainer"] {
            background-color: var(--color-brown-light) !important;
        }
        
        /* Botones primarios */
        button[class*="button-primary"],
        button[class*="ControlButton"] {
            background-color: var(--color-brown) !important;
            color: white !important;
        }
        
        /* Estilos para tarjetas y contenedores */
        div[class*="Card"],
        div[class*="ControlContainer"] {
            background-color: white !important;
            border-radius: 8px !important;
            border: none !important;
            box-shadow: var(--shadow) !important;
        }
        
        /* Estilos para listados */
        div[class*="ListCard"] {
            border-radius: 8px !important;
            margin-bottom: 12px !important;
            background-color: white !important;
            border: none !important;
            box-shadow: var(--shadow) !important;
        }
        
        /* Mejoras móviles específicas */
        @media (max-width: 799px) {
            /* Ajustes de espaciado para móviles */
            main[class*="AppMainContainer"] {
                padding: 10px !important;
            }
            
            /* Ajuste de contenedores */
            div[class*="ControlContainer"],
            div[class*="Widget"] {
                width: 100% !important;
                margin-left: 0 !important;
                margin-right: 0 !important;
                padding: 10px !important;
            }
            
            /* Reducir espaciado excesivo */
            div[class*="EditorContainer"] {
                padding: 0 !important;
                margin: 0 !important;
                width: 100% !important;
            }
            
            /* Ajustar ancho de controles */
            div[class*="WidgetControlContainer"] {
                display: block !important;
                width: 100% !important;
            }
            
            /* Ajuste de campos */
            input, textarea {
                width: 100% !important;
                box-sizing: border-box !important;
            }
            
            /* Ajuste de etiquetas */
            label {
                display: block !important;
                width: 100% !important;
                margin-bottom: 8px !important;
            }
            
            /* Ajuste de botones en editor */
            button {
                padding: 10px 16px !important;
                margin: 5px !important;
            }
        }
    </style>
    
    <!-- Script para inyectar estilos específicos al CMS después de que cargue -->
    <script>
        function injectCustomStyles() {
            const styleElement = document.createElement('style');
            styleElement.textContent = `
                /* Estilos personalizados para Netlify CMS */
                .nc-appHeader-container {
                    background-color: #5d483e !important;
                    border-bottom: none !important;
                }
                
                .nc-appHeader-content {
                    max-width: 1200px !important;
                }
                
                .nc-appHeader-logo {
                    color: #f5f0e8 !important;
                }
                
                .nc-appHeader-button {
                    background-color: #8c6d5d !important;
                    color: white !important;
                }
                
                /* Formularios */
                .nc-entryEditor-container {
                    max-width: 940px !important;
                    margin: 0 auto !important;
                    padding: 20px !important;
                }
                
                /* Ajustar para móviles */
                @media (max-width: 799px) {
                    .nc-entryEditor-container {
                        padding: 10px !important;
                    }
                    
                    .nc-entryEditor-controlPane {
                        padding: 5px !important;
                    }
                    
                    .nc-entryEditor-controlPaneContainer {
                        width: 100% !important;
                        margin: 0 !important;
                    }
                    
                    .nc-controlPane-control {
                        margin-bottom: 15px !important;
                        width: 100% !important;
                    }
                    
                    .nc-controlPane-label {
                        margin-bottom: 10px !important;
                    }
                }
            `;
            document.head.appendChild(styleElement);
        }
        
        // Inyectar estilos después de que la página esté cargada
        document.addEventListener('DOMContentLoaded', function() {
            // Intentar inyectar inmediatamente
            injectCustomStyles();
            
            // Y de nuevo después de un retraso para asegurar que todo esté listo
            setTimeout(injectCustomStyles, 1000);
            setTimeout(injectCustomStyles, 3000);
        });
    </script>
</head>
<body>
    <!-- Indicador de carga -->
    <div class="loading" id="loading">
        <div class="loading-spinner"></div>
        <p>Cargando panel de administración...</p>
    </div>
    
    <a href="/" class="back-to-site">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
            <path d="M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0zm3.5 7.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H11.5z"/>
        </svg>
        Volver al sitio
    </a>
    
    <!-- Script para configurar Netlify CMS -->
    <script>
        // Detectar si es un dispositivo móvil
        const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
        
        // Configurar tiempo de espera más largo para dispositivos móviles
        window.CMS_MANUAL_INIT = true;
    </script>
    
    <!-- Cargar Netlify CMS -->
    <script src="https://cdn.jsdelivr.net/npm/netlify-cms@2.10.192/dist/netlify-cms.js"></script>
    
    <!-- Configuración personalizada para el CMS -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Configuración personalizada para móviles
            const config = {
                load_config_file: true,
                config: {
                    // Configurar para mejor rendimiento en móviles
                    editor: {
                        preview: isMobile ? false : true // Desactivar previsualización en móviles
                    },
                    backend: {
                        name: "git-gateway",
                        branch: "main",
                    },
                    logo_url: '/img/logo.png',
                    locale: 'es',
                    slug: {
                        encoding: 'ascii',
                        clean_accents: true,
                    }
                }
            };
            
            // Inicializar CMS con la configuración
            setTimeout(function() {
                if (window.CMS) {
                    window.CMS.init(config);
                    
                    // Ocultar indicador de carga cuando el CMS esté listo
                    window.CMS.registerEventListener({
                        name: 'preSave',
                        handler: function() {
                            document.getElementById('loading').style.display = 'flex';
                        }
                    });
                    
                    window.CMS.registerEventListener({
                        name: 'postSave',
                        handler: function() {
                            document.getElementById('loading').style.display = 'none';
                        }
                    });
                    
                    // Ocultar la pantalla de carga después de un tiempo
                    setTimeout(function() {
                        const loadingElement = document.getElementById('loading');
                        if (loadingElement) {
                            loadingElement.style.opacity = '0';
                            loadingElement.style.transition = 'opacity 0.5s ease';
                            setTimeout(function() {
                                loadingElement.style.display = 'none';
                            }, 500);
                        }
                    }, 3000);
                    
                    // Aplicar estilos personalizados adicionales
                    injectCustomStyles();
                }
            }, 1000);
        });
    </script>
</body>
</html> 